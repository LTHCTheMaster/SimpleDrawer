scoreboard players set bigunfill simpledrawer.tempC 0
execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:0b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:1b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:2b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:3b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:4b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:5b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:6b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:7b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:8b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:9b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:10b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:11b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:12b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:13b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:14b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:15b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:16b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:17b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:18b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:19b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:20b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:21b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:22b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:23b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:24b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:25b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:26b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:27b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:28b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:29b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:30b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:31b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:32b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:33b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:34b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1

execute store success storage simpledrawer:temp bigunfill byte 1 run data get entity @p[tag=simpledrawer.adder] Inventory[{Slot:35b}]
execute if data storage simpledrawer:temp {bigunfill:0b} run scoreboard players add bigunfill simpledrawer.tempC 1


data remove storage simpledrawer:temp ItemUnfilled
data modify storage simpledrawer:temp ItemUnfilled set from entity @s Item.tag.data
execute if data entity @s Item.tag.info{stack1:0b,stack16:0b} run data modify storage simpledrawer:temp ItemUnfilled.Count set value 64b
execute if data entity @s Item.tag.info{stack1:0b,stack16:16b} run data modify storage simpledrawer:temp ItemUnfilled.Count set value 16b
execute if data entity @s Item.tag.info{stack1:1b,stack16:0b} run data modify storage simpledrawer:temp ItemUnfilled.Count set value 1b

#drop (bigunfill) items

execute if score nb simpledrawer.tempC >= bigunfill simpledrawer.tempC run scoreboard players operation nbstack simpledrawer.tempC = bigunfill simpledrawer.tempC
execute if score nb simpledrawer.tempC <= bigunfill simpledrawer.tempC run scoreboard players operation nbstack simpledrawer.tempC = nb simpledrawer.tempC
scoreboard players operation nbitems simpledrawer.tempC = nbstack simpledrawer.tempC
execute if data entity @s Item.tag.info{stack1:0b,stack16:0b} run scoreboard players operation nbitems simpledrawer.tempC *= 64 simpledrawer.tempC
execute if data entity @s Item.tag.info{stack1:0b,stack16:1b} run scoreboard players operation nbitems simpledrawer.tempC *= 16 simpledrawer.tempC
execute if data entity @s Item.tag.info{stack1:1b,stack16:0b} run scoreboard players operation nbitems simpledrawer.tempC *= 1 simpledrawer.tempC


execute store result score nb simpledrawer.tempC run data get entity @s Item.tag.data.Count
scoreboard players operation nb simpledrawer.tempC -= nbitems simpledrawer.tempC

execute if score nb simpledrawer.tempC matches 0 run function simpledrawer:working/unfill/inf64

execute if score nb simpledrawer.tempC matches 1.. store result entity @s Item.tag.data.Count long 1 run scoreboard players get nb simpledrawer.tempC 
function simpledrawer:working/display

#tellraw @a ["",{"text":"nbstack "},{"score":{"name":"nbstack","objective":"simpledrawer.tempC"}}]

function simpledrawer:working/unfill/drop_bigunfill

execute as @e[type=item,tag=simpledrawer.summoned] run data modify entity @s Item set from storage simpledrawer:temp ItemUnfilled
execute as @e[type=item,tag=simpledrawer.summoned] run data modify entity @s Owner set from entity @p[tag=simpledrawer.adder] UUID
tag @e remove simpledrawer.summoned
#drop (nb) items
